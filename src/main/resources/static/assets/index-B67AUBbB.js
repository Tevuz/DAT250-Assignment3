var We=Object.defineProperty;var Ge=(t,e,n)=>e in t?We(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ue=(t,e,n)=>Ge(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function N(){}function x(t,e){for(const n in e)t[n]=e[n];return t}function Ze(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ye(t){return t()}function ke(){return Object.create(null)}function R(t){t.forEach(Ye)}function de(t){return typeof t=="function"}function W(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xe(t){return Object.keys(t).length===0}function ze(t,...e){if(t==null){for(const o of e)o(void 0);return N}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ye(t,e,n){return t.set(n),e}function _(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function oe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function A(t){return document.createTextNode(t)}function q(){return A(" ")}function le(){return A("")}function T(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function pe(t){return function(e){return e.preventDefault(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function et(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function ve(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function tt(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}function ee(t,e){return new t(e)}let J;function I(t){J=t}function G(){if(!J)throw new Error("Function called outside component initialization");return J}function Fe(t){G().$$.on_mount.push(t)}function nt(t){G().$$.after_update.push(t)}function ot(t){G().$$.on_destroy.push(t)}function lt(){const t=G();return(e,n,{cancelable:o=!1}={})=>{const l=t.$$.callbacks[e];if(l){const s=tt(e,n,{cancelable:o});return l.slice().forEach(c=>{c.call(t,s)}),!s.defaultPrevented}return!0}}function Ee(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}const z=[],Oe=[];let F=[];const Ce=[],Qe=Promise.resolve();let ae=!1;function Ue(){ae||(ae=!0,Qe.then(ge))}function _e(){return Ue(),Qe}function he(t){F.push(t)}const fe=new Set;let X=0;function ge(){if(X!==0)return;const t=J;do{try{for(;X<z.length;){const e=z[X];X++,I(e),st(e.$$)}}catch(e){throw z.length=0,X=0,e}for(I(null),z.length=0,X=0;Oe.length;)Oe.pop()();for(let e=0;e<F.length;e+=1){const n=F[e];fe.has(n)||(fe.add(n),n())}F.length=0}while(z.length);for(;Ce.length;)Ce.pop()();ae=!1,fe.clear(),I(t)}function st(t){if(t.fragment!==null){t.update(),R(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(he)}}function rt(t){const e=[],n=[];F.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),F=e}const Z=new Set;let B;function se(){B={r:0,c:[],p:B}}function re(){B.r||R(B.c),B=B.p}function M(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function D(t,e,n,o){if(t&&t.o){if(Z.has(t))return;Z.add(t),B.c.push(()=>{Z.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function $e(t,e){const n=e.token={};function o(l,s,c,u){if(e.token!==n)return;e.resolved=u;let i=e.ctx;c!==void 0&&(i=i.slice(),i[c]=u);const r=l&&(e.current=l)(i);let h=!1;e.block&&(e.blocks?e.blocks.forEach((d,p)=>{p!==s&&d&&(se(),D(d,1,1,()=>{e.blocks[p]===d&&(e.blocks[p]=null)}),re())}):e.block.d(1),r.c(),M(r,1),r.m(e.mount(),e.anchor),h=!0),e.block=r,e.blocks&&(e.blocks[s]=r),h&&ge()}if(Ze(t)){const l=G();if(t.then(s=>{I(l),o(e.then,1,e.value,s),I(null)},s=>{if(I(l),o(e.catch,2,e.error,s),I(null),!e.hasCatch)throw s}),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}}function it(t,e,n){const o=e.slice(),{resolved:l}=t;t.current===t.then&&(o[t.value]=l),t.current===t.catch&&(o[t.error]=l),t.block.p(o,n)}function V(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function te(t,e){const n={},o={},l={$$scope:1};let s=t.length;for(;s--;){const c=t[s],u=e[s];if(u){for(const i in c)i in u||(o[i]=1);for(const i in u)l[i]||(n[i]=u[i],l[i]=1);t[s]=u}else for(const i in c)l[i]=1}for(const c in o)c in n||(n[c]=void 0);return n}function ne(t){return typeof t=="object"&&t!==null?t:{}}function K(t){t&&t.c()}function Q(t,e,n){const{fragment:o,after_update:l}=t.$$;o&&o.m(e,n),he(()=>{const s=t.$$.on_mount.map(Ye).filter(de);t.$$.on_destroy?t.$$.on_destroy.push(...s):R(s),t.$$.on_mount=[]}),l.forEach(he)}function U(t,e){const n=t.$$;n.fragment!==null&&(rt(n.after_update),R(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){t.$$.dirty[0]===-1&&(z.push(t),Ue(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,n,o,l,s,c=null,u=[-1]){const i=J;I(t);const r=t.$$={fragment:null,ctx:[],props:s,update:N,not_equal:l,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ke(),dirty:u,skip_bound:!1,root:e.target||i.$$.root};c&&c(r.root);let h=!1;if(r.ctx=n?n(t,e.props||{},(d,p,...g)=>{const f=g.length?g[0]:p;return r.ctx&&l(r.ctx[d],r.ctx[d]=f)&&(!r.skip_bound&&r.bound[d]&&r.bound[d](f),h&&ct(t,d)),p}):[],r.update(),h=!0,R(r.before_update),r.fragment=o?o(r.ctx):!1,e.target){if(e.hydrate){const d=et(e.target);r.fragment&&r.fragment.l(d),d.forEach(j)}else r.fragment&&r.fragment.c();e.intro&&M(t.$$.fragment),Q(t,e.target,e.anchor),ge()}I(i)}class ce{constructor(){ue(this,"$$");ue(this,"$$set")}$destroy(){U(this,1),this.$destroy=N}$on(e,n){if(!de(n))return N;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(e){this.$$set&&!xe(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ut="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ut);const Y=[];function Je(t,e){return{subscribe:me(t,e).subscribe}}function me(t,e=N){let n;const o=new Set;function l(u){if(W(t,u)&&(t=u,n)){const i=!Y.length;for(const r of o)r[1](),Y.push(r,t);if(i){for(let r=0;r<Y.length;r+=2)Y[r][0](Y[r+1]);Y.length=0}}}function s(u){l(u(t))}function c(u,i=N){const r=[u,i];return o.add(r),o.size===1&&(n=e(l,s)||N),u(t),()=>{o.delete(r),o.size===0&&n&&(n(),n=null)}}return{set:l,update:s,subscribe:c}}function Ke(t,e,n){const o=!Array.isArray(t),l=o?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Je(n,(c,u)=>{let i=!1;const r=[];let h=0,d=N;const p=()=>{if(h)return;d();const f=e(o?r[0]:r,c,u);s?c(f):d=de(f)?f:N},g=l.map((f,O)=>ze(f,a=>{r[O]=a,h&=~(1<<O),i&&p()},()=>{h|=1<<O}));return i=!0,p(),function(){R(g),d(),i=!1}})}function ft(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,o,l,s,c=[],u="",i=t.split("/");for(i[0]||i.shift();l=i.shift();)n=l[0],n==="*"?(c.push("wild"),u+="/(.*)"):n===":"?(o=l.indexOf("?",1),s=l.indexOf(".",1),c.push(l.substring(1,~o?o:~s?s:l.length)),u+=~o&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(u+=(~o?"?":"")+"\\"+l.substring(s))):u+="/"+l;return{keys:c,pattern:new RegExp("^"+u+"/?$","i")}}function at(t){let e,n,o;const l=[t[2]];var s=t[0];function c(u,i){let r={};for(let h=0;h<l.length;h+=1)r=x(r,l[h]);return i!==void 0&&i&4&&(r=x(r,te(l,[ne(u[2])]))),{props:r}}return s&&(e=ee(s,c(t)),e.$on("routeEvent",t[7])),{c(){e&&K(e.$$.fragment),n=le()},m(u,i){e&&Q(e,u,i),S(u,n,i),o=!0},p(u,i){if(i&1&&s!==(s=u[0])){if(e){se();const r=e;D(r.$$.fragment,1,0,()=>{U(r,1)}),re()}s?(e=ee(s,c(u,i)),e.$on("routeEvent",u[7]),K(e.$$.fragment),M(e.$$.fragment,1),Q(e,n.parentNode,n)):e=null}else if(s){const r=i&4?te(l,[ne(u[2])]):{};e.$set(r)}},i(u){o||(e&&M(e.$$.fragment,u),o=!0)},o(u){e&&D(e.$$.fragment,u),o=!1},d(u){u&&j(n),e&&U(e,u)}}}function ht(t){let e,n,o;const l=[{params:t[1]},t[2]];var s=t[0];function c(u,i){let r={};for(let h=0;h<l.length;h+=1)r=x(r,l[h]);return i!==void 0&&i&6&&(r=x(r,te(l,[i&2&&{params:u[1]},i&4&&ne(u[2])]))),{props:r}}return s&&(e=ee(s,c(t)),e.$on("routeEvent",t[6])),{c(){e&&K(e.$$.fragment),n=le()},m(u,i){e&&Q(e,u,i),S(u,n,i),o=!0},p(u,i){if(i&1&&s!==(s=u[0])){if(e){se();const r=e;D(r.$$.fragment,1,0,()=>{U(r,1)}),re()}s?(e=ee(s,c(u,i)),e.$on("routeEvent",u[6]),K(e.$$.fragment),M(e.$$.fragment,1),Q(e,n.parentNode,n)):e=null}else if(s){const r=i&6?te(l,[i&2&&{params:u[1]},i&4&&ne(u[2])]):{};e.$set(r)}},i(u){o||(e&&M(e.$$.fragment,u),o=!0)},o(u){e&&D(e.$$.fragment,u),o=!1},d(u){u&&j(n),e&&U(e,u)}}}function dt(t){let e,n,o,l;const s=[ht,at],c=[];function u(i,r){return i[1]?0:1}return e=u(t),n=c[e]=s[e](t),{c(){n.c(),o=le()},m(i,r){c[e].m(i,r),S(i,o,r),l=!0},p(i,[r]){let h=e;e=u(i),e===h?c[e].p(i,r):(se(),D(c[h],1,1,()=>{c[h]=null}),re(),n=c[e],n?n.p(i,r):(n=c[e]=s[e](i),n.c()),M(n,1),n.m(o.parentNode,o))},i(i){l||(M(n),l=!0)},o(i){D(n),l=!1},d(i){i&&j(o),c[e].d(i)}}}function je(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let o="";return n>-1&&(o=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:o}}const be=Je(null,function(e){e(je());const n=()=>{e(je())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Ke(be,t=>t.location);Ke(be,t=>t.querystring);const Se=me(void 0);async function pt(t){if(t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await _e(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}async function Le(){await _e(),window.history.back()}function _t(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function gt(t,e,n){let{routes:o={}}=e,{prefix:l=""}=e,{restoreScrollState:s=!1}=e;class c{constructor(m,b){if(!b||typeof b!="function"&&(typeof b!="object"||b._sveltesparouter!==!0))throw Error("Invalid component object");if(!m||typeof m=="string"&&(m.length<1||m.charAt(0)!="/"&&m.charAt(0)!="*")||typeof m=="object"&&!(m instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:C,keys:P}=ft(m);this.path=m,typeof b=="object"&&b._sveltesparouter===!0?(this.component=b.component,this.conditions=b.conditions||[],this.userData=b.userData,this.props=b.props||{}):(this.component=()=>Promise.resolve(b),this.conditions=[],this.props={}),this._pattern=C,this._keys=P}match(m){if(l){if(typeof l=="string")if(m.startsWith(l))m=m.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const $=m.match(l);if($&&$[0])m=m.substr($[0].length)||"/";else return null}}const b=this._pattern.exec(m);if(b===null)return null;if(this._keys===!1)return b;const C={};let P=0;for(;P<this._keys.length;){try{C[this._keys[P]]=decodeURIComponent(b[P+1]||"")||null}catch{C[this._keys[P]]=null}P++}return C}async checkConditions(m){for(let b=0;b<this.conditions.length;b++)if(!await this.conditions[b](m))return!1;return!0}}const u=[];o instanceof Map?o.forEach((E,m)=>{u.push(new c(m,E))}):Object.keys(o).forEach(E=>{u.push(new c(E,o[E]))});let i=null,r=null,h={};const d=lt();async function p(E,m){await _e(),d(E,m)}let g=null,f=null;s&&(f=E=>{E.state&&(E.state.__svelte_spa_router_scrollY||E.state.__svelte_spa_router_scrollX)?g=E.state:g=null},window.addEventListener("popstate",f),nt(()=>{_t(g)}));let O=null,a=null;const v=be.subscribe(async E=>{O=E;let m=0;for(;m<u.length;){const b=u[m].match(E.location);if(!b){m++;continue}const C={route:u[m].path,location:E.location,querystring:E.querystring,userData:u[m].userData,params:b&&typeof b=="object"&&Object.keys(b).length?b:null};if(!await u[m].checkConditions(C)){n(0,i=null),a=null,p("conditionsFailed",C);return}p("routeLoading",Object.assign({},C));const P=u[m].component;if(a!=P){P.loading?(n(0,i=P.loading),a=P,n(1,r=P.loadingParams),n(2,h={}),p("routeLoaded",Object.assign({},C,{component:i,name:i.name,params:r}))):(n(0,i=null),a=null);const $=await P();if(E!=O)return;n(0,i=$&&$.default||$),a=P}b&&typeof b=="object"&&Object.keys(b).length?n(1,r=b):n(1,r=null),n(2,h=u[m].props),p("routeLoaded",Object.assign({},C,{component:i,name:i.name,params:r})).then(()=>{Se.set(r)});return}n(0,i=null),a=null,Se.set(void 0)});ot(()=>{v(),f&&window.removeEventListener("popstate",f)});function k(E){Ee.call(this,t,E)}function L(E){Ee.call(this,t,E)}return t.$$set=E=>{"routes"in E&&n(3,o=E.routes),"prefix"in E&&n(4,l=E.prefix),"restoreScrollState"in E&&n(5,s=E.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[i,r,h,o,l,s,k,L]}class mt extends ce{constructor(e){super(),ie(this,e,gt,dt,W,{routes:3,prefix:4,restoreScrollState:5})}}function Pe(t,e,n){const o=t.slice();return o[11]=e[n],o}function qe(t,e,n){const o=t.slice();return o[16]=e[n],o}function Ne(t,e,n){const o=t.slice();o[16]=e[n];const l=o[16].votes.length*100/o[15];return o[17]=l,o}function bt(t){const e=t.slice(),n=e[14].voteOptions.reduce((o,l)=>o+l.votes.length,0);return e[15]=n,e}function wt(t){let e=t[22]+"",n,o;return{c(){n=A(e),o=q()},m(l,s){S(l,n,s),S(l,o,s)},p(l,s){s&3&&e!==(e=l[22]+"")&&H(n,e)},d(l){l&&(j(n),j(o))}}}function kt(t){let e,n,o=t[14].question+"",l,s,c;function u(d,p){return d[2][d[11]].voted?Ae:yt}function i(d,p){return p===Ae?bt(d):d}let r=u(t),h=r(i(t,r));return{c(){e=w("div"),n=w("h2"),l=A(o),s=q(),h.c(),c=q(),y(e,"class","entry")},m(d,p){S(d,e,p),_(e,n),_(n,l),_(e,s),h.m(e,null),S(d,c,p)},p(d,p){p&3&&o!==(o=d[14].question+"")&&H(l,o),r===(r=u(d))&&h?h.p(i(d,r),p):(h.d(1),h=r(i(d,r)),h&&(h.c(),h.m(e,null)))},d(d){d&&(j(e),j(c)),h.d()}}}function yt(t){let e,n,o,l,s,c=t[14].voteOptions.reduce(Re,0)+"",u,i,r,h,d,p,g=V(t[14].voteOptions),f=[];for(let a=0;a<g.length;a+=1)f[a]=Te(qe(t,g,a));function O(...a){return t[8](t[14],...a)}return{c(){e=w("div"),n=w("form");for(let a=0;a<f.length;a+=1)f[a].c();o=q(),l=w("div"),s=w("span"),u=A(c),i=A(" votes"),r=q(),h=w("button"),h.innerHTML="<h3>Vote</h3>",y(h,"class","button button-accent"),y(h,"type","submit"),y(l,"class","align-right"),y(e,"class","select")},m(a,v){S(a,e,v),_(e,n);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(n,null);_(n,o),_(n,l),_(l,s),_(s,u),_(s,i),_(l,r),_(l,h),d||(p=T(n,"submit",pe(O)),d=!0)},p(a,v){if(t=a,v&11){g=V(t[14].voteOptions);let k;for(k=0;k<g.length;k+=1){const L=qe(t,g,k);f[k]?f[k].p(L,v):(f[k]=Te(L),f[k].c(),f[k].m(n,o))}for(;k<f.length;k+=1)f[k].d(1);f.length=g.length}v&3&&c!==(c=t[14].voteOptions.reduce(Re,0)+"")&&H(u,c)},d(a){a&&j(e),oe(f,a),d=!1,p()}}}function Ae(t){let e,n,o,l,s,c=t[15]+"",u,i,r,h,d,p,g=V(t[14].voteOptions),f=[];for(let a=0;a<g.length;a+=1)f[a]=Ie(Ne(t,g,a));function O(...a){return t[6](t[14],...a)}return{c(){e=w("div"),n=w("form");for(let a=0;a<f.length;a+=1)f[a].c();o=q(),l=w("div"),s=w("span"),u=A(c),i=A(" votes"),r=q(),h=w("button"),h.innerHTML="<h3>Voted</h3>",y(h,"class","button"),h.disabled=!0,y(l,"class","align-right"),y(e,"class","select")},m(a,v){S(a,e,v),_(e,n);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(n,null);_(n,o),_(n,l),_(l,s),_(s,u),_(s,i),_(l,r),_(l,h),d||(p=T(n,"submit",pe(O)),d=!0)},p(a,v){if(t=a,v&7){g=V(t[14].voteOptions);let k;for(k=0;k<g.length;k+=1){const L=Ne(t,g,k);f[k]?f[k].p(L,v):(f[k]=Ie(L),f[k].c(),f[k].m(n,o))}for(;k<f.length;k+=1)f[k].d(1);f.length=g.length}v&3&&c!==(c=t[15]+"")&&H(u,c)},d(a){a&&j(e),oe(f,a),d=!1,p()}}}function Te(t){let e,n,o,l,s=t[16].caption+"",c,u,i;function r(...h){return t[7](t[16],...h)}return{c(){e=w("label"),n=w("input"),o=w("span"),l=w("span"),c=A(s),y(n,"type","checkbox"),y(o,"class","icon"),y(e,"class","item")},m(h,d){S(h,e,d),_(e,n),_(e,o),_(e,l),_(l,c),u||(i=[T(n,"keypress",$t),T(n,"change",r)],u=!0)},p(h,d){t=h,d&3&&s!==(s=t[16].caption+"")&&H(c,s)},d(h){h&&j(e),u=!1,R(i)}}}function vt(t){let e,n,o=t[16].caption+"",l;return{c(){e=w("span"),n=w("span"),l=A(o),y(e,"class","icon")},m(s,c){S(s,e,c),S(s,n,c),_(n,l)},p(s,c){c&3&&o!==(o=s[16].caption+"")&&H(l,o)},d(s){s&&(j(e),j(n))}}}function Et(t){let e,n,o=t[16].caption+"",l;return{c(){e=w("span"),n=w("span"),l=A(o),y(e,"class","icon selected")},m(s,c){S(s,e,c),S(s,n,c),_(n,l)},p(s,c){c&3&&o!==(o=s[16].caption+"")&&H(l,o)},d(s){s&&(j(e),j(n))}}}function Ie(t){let e,n,o,l,s=t[16].votes.length+"",c,u,i,r;function h(g,f){return f&7&&(n=null),n==null&&(n=!!g[2][g[11]].options.includes(g[16].id)),n?Et:vt}let d=h(t,-1),p=d(t);return{c(){e=w("label"),p.c(),o=q(),l=w("span"),c=A(s),u=A(" votes"),i=q(),r=w("input"),y(l,"class","float-right"),r.disabled=!0,y(e,"class","item"),ve(e,"background-image","linear-gradient(to right, var(--col-accent) "+t[17]+"%, white "+t[17]+"%)")},m(g,f){S(g,e,f),p.m(e,null),_(e,o),_(e,l),_(l,c),_(l,u),_(e,i),_(e,r)},p(g,f){d===(d=h(g,f))&&p?p.p(g,f):(p.d(1),p=d(g),p&&(p.c(),p.m(e,o))),f&3&&s!==(s=g[16].votes.length+"")&&H(c,s),f&3&&ve(e,"background-image","linear-gradient(to right, var(--col-accent) "+g[17]+"%, white "+g[17]+"%)")},d(g){g&&j(e),p.d()}}}function Ot(t){let e;return{c(){e=A(`Loading Poll...\r
        `)},m(n,o){S(n,e,o)},p:N,d(n){n&&j(e)}}}function Me(t){let e,n,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Ot,then:kt,catch:wt,value:14,error:22};return $e(n=t[1][t[11]],o),{c(){e=le(),o.block.c()},m(l,s){S(l,e,s),o.block.m(l,o.anchor=s),o.mount=()=>e.parentNode,o.anchor=e},p(l,s){t=l,o.ctx=t,s&3&&n!==(n=t[1][t[11]])&&$e(n,o)||it(o,t,s)},d(l){l&&j(e),o.block.d(l),o.token=null,o=null}}}function Ct(t){let e,n,o,l,s,c,u,i,r,h=V(t[0]),d=[];for(let p=0;p<h.length;p+=1)d[p]=Me(Pe(t,h,p));return{c(){e=w("div"),n=w("div"),o=w("h1"),o.textContent="Polls",l=q(),s=w("span"),c=w("button"),c.innerHTML="<h2>Create Poll</h2>",u=q();for(let p=0;p<d.length;p+=1)d[p].c();y(o,"class","column"),y(c,"class","button button-accent"),y(c,"type","button"),y(s,"class","column align-right"),y(n,"class","row"),y(e,"class","content")},m(p,g){S(p,e,g),_(e,n),_(n,o),_(n,l),_(n,s),_(s,c),_(e,u);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(e,null);i||(r=T(c,"click",pe(t[5])),i=!0)},p(p,[g]){if(g&31){h=V(p[0]);let f;for(f=0;f<h.length;f+=1){const O=Pe(p,h,f);d[f]?d[f].p(O,g):(d[f]=Me(O),d[f].c(),d[f].m(e,null))}for(;f<d.length;f+=1)d[f].d(1);d.length=h.length}},i:N,o:N,d(p){p&&j(e),oe(d,p),i=!1,r()}}}function $t(t){t.code==="Enter"&&(this.checked=!this.checked)}const Re=(t,e)=>t+e.votes.length;function jt(t,e,n){let o=[],l={},s={};c(),Fe(()=>{const f=setInterval(c,5e3);return()=>clearInterval(f)});function c(){fetch("/api/polls").then(f=>f.json()).then(f=>{for(const O of f)l[O.id]?l[O.id]!=O&&n(1,l[O.id]=O,l):(n(0,o=[...o,O.id]),n(1,l[O.id]=O,l),n(2,s[O.id]={},s))})}let u={};function i(f,O){u[f]=O.target.checked,console.log(u)}function r(f,O){n(2,s[f.id].voted=!0,s),n(2,s[f.id].options=[],s);for(const a of f.voteOptions.map(v=>v.id).filter(v=>u[v])){s[f.id].options.push(a);let v=JSON.stringify({username:"unknown",voteOption:{id:a}});console.log(v),fetch("/api/votes",{method:"POST",body:v,headers:{"Content-Type":"application/json"}})}setTimeout(()=>fetch("/api/polls/"+f.id).then(a=>a.json()).then(a=>{l[a.id]?l[a.id]!=a&&n(1,l[a.id]=a,l):(n(0,o=[...o,a.id]),n(1,l[a.id]=a,l),n(2,s[a.id]={},s))}),50)}function h(){pt("/polls/create")}return[o,l,s,i,r,h,(f,O)=>r(f),(f,O)=>i(f.id,O),(f,O)=>r(f)]}class St extends ce{constructor(e){super(),ie(this,e,jt,Ct,W,{})}}function De(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function Ve(t){let e;return{c(){e=w("p"),e.textContent="* Question is required.",y(e,"class","errorMessage")},m(n,o){S(n,e,o)},d(n){n&&j(e)}}}function He(t){let e,n,o;function l(){return t[12](t[15])}return{c(){e=w("button"),e.textContent="â•³",y(e,"class","button-delete"),y(e,"type","button")},m(s,c){S(s,e,c),n||(o=T(e,"click",l),n=!0)},p(s,c){t=s},d(s){s&&j(e),n=!1,o()}}}function Be(t){let e,n,o,l,s,c;function u(...h){return t[10](t[15],...h)}function i(...h){return t[11](t[15],...h)}let r=t[13]&&He(t);return{c(){e=w("div"),n=w("input"),l=q(),r&&r.c(),y(n,"id","option_"+t[15]),y(n,"type","text"),n.value=o=t[13],y(n,"placeholder","Option "+(t[15]+1)),y(e,"class","combobox")},m(h,d){S(h,e,d),_(e,n),_(e,l),r&&r.m(e,null),s||(c=[T(n,"input",u),T(n,"change",i)],s=!0)},p(h,d){t=h,d&4&&o!==(o=t[13])&&n.value!==o&&(n.value=o),t[13]?r?r.p(t,d):(r=He(t),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(h){h&&j(e),r&&r.d(),s=!1,R(c)}}}function Xe(t){let e;return{c(){e=w("p"),e.textContent="* At least one option is required.",y(e,"class","errorMessage")},m(n,o){S(n,e,o)},d(n){n&&j(e)}}}function Lt(t){let e,n,o,l,s,c,u,i,r,h,d,p,g,f,O,a,v,k,L=!t[1]&&Ve(),E=V(t[2]),m=[];for(let C=0;C<E.length;C+=1)m[C]=Be(De(t,E,C));let b=!t[3]&&Xe();return{c(){e=w("div"),n=w("h1"),n.textContent="Create Poll",o=q(),l=w("h2"),l.textContent="Question",s=q(),c=w("input"),u=q(),L&&L.c(),i=q(),r=w("h2"),r.textContent="Options",h=q();for(let C=0;C<m.length;C+=1)m[C].c();d=q(),b&&b.c(),p=q(),g=w("div"),f=w("button"),f.innerHTML="<h2>Cancel</h2>",O=q(),a=w("button"),a.innerHTML="<h2>Create</h2>",y(c,"id","question"),y(c,"type","text"),y(c,"placeholder","Question"),y(r,"class","label"),y(f,"class","button button-cancel"),y(f,"type","button"),y(a,"class","button button-accent"),y(a,"type","button"),y(g,"class","float-right"),y(e,"class","form")},m(C,P){S(C,e,P),_(e,n),_(e,o),_(e,l),_(e,s),_(e,c),_(e,u),L&&L.m(e,null),_(e,i),_(e,r),_(e,h);for(let $=0;$<m.length;$+=1)m[$]&&m[$].m(e,null);_(e,d),b&&b.m(e,null),_(e,p),_(e,g),_(g,f),_(g,O),_(g,a),v||(k=[T(c,"input",t[9]),T(f,"click",t[7]),T(a,"click",t[8])],v=!0)},p(C,[P]){if(C[1]?L&&(L.d(1),L=null):L||(L=Ve(),L.c(),L.m(e,i)),P&116){E=V(C[2]);let $;for($=0;$<E.length;$+=1){const we=De(C,E,$);m[$]?m[$].p(we,P):(m[$]=Be(we),m[$].c(),m[$].m(e,d))}for(;$<m.length;$+=1)m[$].d(1);m.length=E.length}C[3]?b&&(b.d(1),b=null):b||(b=Xe(),b.c(),b.m(e,p))},i:N,o:N,d(C){C&&j(e),L&&L.d(),oe(m,C),b&&b.d(),v=!1,R(k)}}}function Pt(t,e,n){let o="",l=!0,s=[""],c=!0;function u(a,v){n(2,s[a]=v.target.value.trim(),s),a===s.length-1&&v.target.value!==""&&n(2,s=[...s,""]),n(3,c=!0)}function i(a,v){v.target.value=v.target.value.trim(),a!==s.length-1&&v.target.value===""&&(s.splice(a,1),n(2,s)),n(3,c=!0)}function r(a){s.length===1?n(2,s[0]="",s):s.splice(a,1),n(3,c=!0),n(2,s)}function h(){Le()}function d(){if(n(1,l=o.length>0),n(3,c=s.length>1),!l||!c)return;const a=JSON.stringify({question:o,author_username:"unknown",voteOptions:s.slice(0,-1).map(v=>({caption:v}))});console.log(a),fetch("/api/polls",{method:"POST",body:a,headers:{"Content-Type":"application/json"}}),Le()}return[o,l,s,c,u,i,r,h,d,a=>{n(0,o=a.target.value.trim()),n(1,l=!0)},(a,v)=>u(a,v),(a,v)=>i(a,v),a=>r(a)]}class qt extends ce{constructor(e){super(),ie(this,e,Pt,Lt,W,{})}}function Nt(t){let e,n,o;return n=new mt({props:{routes:t[1]}}),{c(){e=w("main"),K(n.$$.fragment)},m(l,s){S(l,e,s),Q(n,e,null),o=!0},p:N,i(l){o||(M(n.$$.fragment,l),o=!0)},o(l){D(n.$$.fragment,l),o=!1},d(l){l&&j(e),U(n)}}}function At(t,e,n){let o,l=N,s=()=>(l(),l=ze(c,i=>n(2,o=i)),c);t.$$.on_destroy.push(()=>l());let{page_shown:c=me("/")}=e;s(),Fe(()=>ye(c,o=window.location.pathname,o)),window.addEventListener("popstate",()=>ye(c,o=window.location.pathname,o));let u={"/":St,"/polls/create":qt};return t.$$set=i=>{"page_shown"in i&&s(n(0,c=i.page_shown))},[c,u]}class Tt extends ce{constructor(e){super(),ie(this,e,At,Nt,W,{page_shown:0})}}new Tt({target:document.getElementById("app")});
